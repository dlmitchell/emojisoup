doctype html
html(ng-app='enodjiApp')
  head
    meta(name='keywords' content='emoji,emojis,soup,emojisoup, emoji meaning, emoji defintions, emoji dictionary, dictionary, user generated, make emoji, create emoji')
    meta(property='og:title' content='EmojiSoup')
    meta(property='title' content='EmojiSoup')        
    meta(property='og:description' content='The world\'s consortium of emoji definitions, as defined by you! Search and discover emoji meanings, and even add your own.')
    meta(property='description' content='The world\'s consortium of emoji definitions, as defined by you! Search and discover emoji meanings, and even add your own.')
    meta(property='fuck' content='💩😃😈😲😧😦🐮🐗🐻🐨🐯')
    title= EmojiSoup
    link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel='stylesheet', href='/stylesheets/pure-grids-responsive-min.css')  
    link(rel='stylesheet', href='/stylesheets/font-awesome/css/font-awesome.min.css')
    link(rel='stylesheet', href='/stylesheets/chrome.css' ng-if="isChrome")

    link(rel='image/png', type='image/png', href='/favicon.png')

    script(type='text/javascript' src='/javascripts/jquery-2.1.1.js')
    script(type='text/javascript' src='/javascripts/angular-1.3.8/angular.min.js')
    script(type='text/javascript' src='/javascripts/angular-1.3.8/angular-animate.min.js')
    script(type='text/javascript' src='/javascripts/angular-1.3.8/angular-route.min.js')
    script(type='text/javascript' src='/javascripts/ScrollToFixed/jquery-scrolltofixed-min.js')
    script(type='text/javascript' src='/javascripts/ngInfiniteScroll-master/build/ng-infinite-scroll.min.js')        
    script(type='text/javascript' src='/javascripts/app.js')
    script(type='text/javascript' src='/javascripts/zero/ZeroClipboard.js')
    script(type='text/javascript' src='/javascripts/scriptz.js')

  body 
    div(ng-controller='EmojiController')
        //- header and search
        div(class='header') 
            div(class='is-center')
                form#formSearch(class="search" name="search")
                    input#inputSearch(class="textarea" autocomplete="off" type="text" placeholder="🔍 emojis and recipes" name="q" ng-model="query.value" ng-model-options="{ debounce: 300, getterSetter: true }")

            div(class='auto-center suggestions')
                a(class='pure-u-1 pure-u-md-1-8' ng-repeat="suggestion in searchSuggestions" ng-click='searchEmojis(suggestion)' href="#" )='#{{suggestion}}'

        //- the pot and sentence for partying
        div#the-pot(class='sub-header is-center animate-show' ng-show='sentence.length > 0')        
            div(class='sub-sub is-center')
                div(class='clipboard' ng-repeat='emoji in sentence track by $index')
                    span(class='emoji' ng-click="removeFromPot(emoji)" data-clipboard-name='{{emoji.name}}' data-clipboard-value='{{emoji.unicode}}')='{{emoji.unicode}}'

            //- command center
            div(class='auto-center')
                p
                    | find emojis to make a sentence.
                    a#copy-recipe(href='#' name='copy' ng-click='copyRecipe($event)' data-clipboard-name='copy-recipe' data-clipboard-value)='COPY'
                    | the sentence or 
                    a(href='#' ng-click="showAddForm=true")='add'
                    | it to the collection. or,
                    a(href='#' name='clear' ng-click='clearPot()')='start over'

            //- save a sentence
            div(class='auto-center' ng-show='showAddForm==true')
                form(novalidate)
                    input(class="textarea" type='text' placeholder='Name'           name='name'         ng-model="recipe.name" )
                    input(class="textarea" type='text' placeholder='Description'    name='description'  ng-model="recipe.description")
                    input(class="textarea" type='text' placeholder='Tags'           name='tags'         ng-model="recipe.tags")
                    input(class="hidden"   type="text" placeholder="Recipe"         name="unicode"      ng-model="recipe.unicode" value="{{unicodez}}")

                    div(class='right')
                        input(class="buttonz cancel" type="button"     ng-click='showAddForm=false' value="cancel")="cancel"
                        input(class="buttonz submit" type="submit"     ng-click="addRecipe(recipe)")="save" 
                    
        //- spinner thing. so cool. 
        div(class='loading' ng-show='scrollgis.busy')
            i(class="fa fa-refresh fa-spin")


        div(class='auto-center')
            div(infinite-scroll='scrollgis.nextPage()' infinite-scroll-disabled='scrollgis.busy' infinite-scroll-distance='1')
                div(class='emoji-wrapper l-box pure-u-1 pure-u-1-8 pure-u-md-1-6 pure-u-lg-1-4' ng-repeat="emoji in scrollgis.items")

                    //- if settings.environment.environment == "dev"
                    //-     a(class='tag' ng-click='removeEmoji(emoji._id)' href='#')='delete'
        
                    div.emoji-blanket
                        span(class='emoji' ng-click="addToPot(emoji, $event)" data-clipboard-name='{{emoji.name}}' data-clipboard-value='{{emoji.unicode}}')='{{emoji.unicode}}'
                    h3(class='left')='{{emoji.name}}'
                    p(class='left emoji-tags')
                        a(class='tag' ng-repeat="tag in emoji.tags track by $index" ng-click='searchEmojis(tag)' href='#')='{{tag}}'


    if settings.environment.environment == "prod"
        script.
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-54259648-1', 'auto');
            ga('send', 'pageview');
